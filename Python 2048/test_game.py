from project import move
from project import combine
from project import random_space

def test_move():
    board = [["", "2", "2", ""],
             ["2", "", "", "2"],
             ["2", "", "", "2"],
             ["", "2", "2", ""]
             ]
    assert move(board, "w") == [
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["", "", "", ""],
             ["", "", "", ""]
             ]

    board = [["", "2", "2", ""],
             ["2", "", "", "2"],
             ["2", "", "", "2"],
             ["", "2", "2", ""]
             ]
    assert move(board, "a") == [
             ["2", "2", "", ""],
             ["2", "2", "", ""],
             ["2", "2", "", ""],
             ["2", "2", "", ""]
             ]

    board = [["", "2", "2", ""],
             ["2", "", "", "2"],
             ["2", "", "", "2"],
             ["", "2", "2", ""]
             ]
    assert move(board, "s") == [
             ["", "", "", ""],
             ["", "", "", ""],
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"]
             ]

    board = [["", "2", "2", ""],
             ["2", "", "", "2"],
             ["2", "", "", "2"],
             ["", "2", "2", ""]
             ]
    assert move(board, "d") == [
             ["", "", "2", "2"],
             ["", "", "2", "2"],
             ["", "", "2", "2"],
             ["", "", "2", "2"]
             ]

def test_combine():
    board = [["", "4", "4", ""],
             ["4", "2", "2", "4"],
             ["4", "2", "2", "4"],
             ["", "4", "4", ""]
             ]
    score = 0
    #score = 8+8+4+4
    assert combine(board, "w", score) == ([
        ["", "4", "4", ""],
        ["8", "4", "4", "8"],
        ["", "", "", ""],
        ["", "4", "4", ""]
        ], 24)
    board = [["", "4", "4", ""],
            ["4", "2", "2", "4"],
            ["4", "2", "2", "4"],
            ["", "4", "4", ""]
            ]
    assert combine(board, "a", score) == ([
             ["", "8", "", ""],
             ["4", "4", "", "4"],
             ["4", "4", "", "4"],
             ["", "8", "", ""]
             ], 24)
    board = [["", "4", "4", ""],
            ["4", "2", "2", "4"],
            ["4", "2", "2", "4"],
            ["", "4", "4", ""]
            ]
    assert combine(board, "s", score) == ([
             ["", "4", "4", ""],
             ["", "", "", ""],
             ["8", "4", "4", "8"],
             ["", "4", "4", ""]
             ], 24)
    board = [["", "4", "4", ""],
            ["4", "2", "2", "4"],
            ["4", "2", "2", "4"],
            ["", "4", "4", ""]
            ]
    assert combine(board, "d", score) == ([
             ["", "", "8", ""],
             ["4", "", "4", "4"],
             ["4", "", "4", "4"],
             ["", "", "8", ""]
             ], 24)

def test_random_space():
    board = [["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["", "2", "2", "2"]
             ]
    assert (random_space(board) == [
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"]
             ] or random_space(board) == [
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["2", "2", "2", "2"],
             ["4", "2", "2", "2"]
             ])

    board2 = [["", "", "", ""],
            ["", "", "2", "2"],
            ["", "", "2", "2"],
            ["", "", "2", "2"]
            ]

    board2 = random_space(board2)
    two_count = 0
    four_count = 0
    for row in board2:
        for space in row:
            if space == "2":
                two_count += 1
            elif space == "4":
                four_count += 1
    #assert that the amount of 2's is 1 greater than before or a 4 has spawned
    assert(two_count == 7 or four_count == 1)
